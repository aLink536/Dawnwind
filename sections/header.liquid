<header
  class="color-scheme color-scheme--{{ section.settings.color_scheme }}"
>
  <div class="page-width">
    <div class="flex items-center justify-between gap-5 min-h-20">
      <!-- Menu -->
      {% if section.settings.menu != blank %}
        <nav
          class="hidden md:block
          {% if section.settings.logo_position == 'center' %}
            order-1 flex-1
          {% else %}
            order-2
          {% endif %}
          "
        >
          <ul class="flex items-center gap-6 justify-start">
            {% for link in section.settings.menu.links %}
              <li>
                <a href="{{ link.url }}" class="transition hover:opacity-80">
                  {{ link.title }}
                </a>
              </li>
            {% endfor %}
          </ul>
        </nav>
      {% endif %}

      <!-- Logo -->
      <div
        class="text-lg font-semibold flex justify-center
        {% if section.settings.logo_position == 'center' %}
          order-2 flex-1
        {% else %}
          order-1
        {% endif %}
        "
        style="max-width: {{ section.settings.logo_max_width }}px;"
      >
        <a href="{{ routes.root_url }}" class="transition hover:opacity-80 block">
          {% if section.settings.logo_svg != blank %}
            <div class="w-full h-full [&>svg]:h-[30px] [&>svg]:max-h-full">
            {{ section.settings.logo_svg | raw }}
            </div>
          {% elsif section.settings.logo_image != blank %}
            {{ section.settings.logo_image | image_url: width: section.settings.logo_max_width | image_tag: alt: shop.name, class: 'mx-auto' }}
          {% else %}
            {{ shop.name }}
          {% endif %}
        </a>
      </div>

      <!-- Icons -->
      <div
        class="flex items-center gap-4 justify-end
        {% if section.settings.logo_position == 'center' %}
          order-3 flex-1
        {% else %}
          order-3
        {% endif %}
        "
      >
        {% if shop.customer_accounts_enabled %}
          <a
            href="{{ routes.account_url }}"
            aria-label="Account"
            class="transition hover:opacity-80 w-6 h-6 flex items-center justify-center"
          >
            <span class="w-6 h-6 [&>svg]:w-full [&>svg]:h-full [&>svg]:fill-current">
              {{ 'icon-account.svg' | inline_asset_content }}
            </span>
          </a>
        {% endif %}

        <a
          href="{{ routes.cart_url }}"
          aria-label="Cart"
          class="relative transition hover:opacity-80 w-6 h-6 flex items-center justify-center"
        >
          <span class="w-5 h-5 [&>svg]:w-full [&>svg]:h-full [&>svg]:fill-current">
            {{ 'icon-cart.svg' | inline_asset_content }}
          </span>

          {% if cart.item_count > 0 %}
            <span
              class="absolute -top-2 -right-2 rounded-full text-xs font-medium px-1.5 py-0.5 bg-(--color-accent) text-(--color-foreground)"
            >
              {{ cart.item_count }}
            </span>
          {% endif %}
        </a>
      </div>
    </div>
  </div>
</header>

{% schema %}
{
  "name": "Header",
  "class": "sticky top-0 z-50",
  "settings": [
    {
      "type": "link_list",
      "id": "menu",
      "label": "Main menu"
    },
    {
      "type": "select",
      "id": "logo_position",
      "label": "Logo position",
      "default": "left",
      "options": [
        { "value": "left", "label": "Left" },
        { "value": "center", "label": "Center" }
      ]
    },
    {
      "type": "image_picker",
      "id": "logo_image",
      "label": "Logo image"
    },
    {
      "type": "html",
      "id": "logo_svg",
      "label": "SVG logo (optional)"
    },
    {
      "type": "range",
      "id": "logo_max_width",
      "label": "Logo max width (px)",
      "default": 180,
      "min": 40,
      "max": 400,
      "step": 10
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color scheme"
    }
  ]
}
{% endschema %}
