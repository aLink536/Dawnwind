{% comment %}
  This section is used in the article template to render the article page, which
  displays the full content of the blog post and can optionally include a
  comments section for customers (not shown in this example).

  https://shopify.dev/docs/storefronts/themes/architecture/templates/article
{% endcomment %}

{% if article.image %}
<div class="relative w-full max-h-screen overflow-hidden mb-10">
  <!-- Image container with proper height constraints -->
  <div class="relative h-screen max-h-[80vh]">
    <!-- Background image -->
    {{ article.image | image_url: width: 2000 | image_tag: class: 'absolute inset-0 w-full h-full object-cover' }}
    
    <!-- Dark overlay (separate from image) -->
    <div class="absolute inset-0 bg-black/60"></div>
    
    <!-- Text content -->
    <div class="relative z-10 flex h-full items-center justify-center px-4">
      <div class="max-w-screen-lg mx-auto text-center">
        <h1 class="uppercase text-white text-3xl md:text-4xl lg:text-5xl font-bold">
          {{ article.title }}
        </h1>
      </div>
    </div>
  </div>
</div>
{% endif %}

<div class="article max-w-screen-lg mx-auto">
{% unless article.image %}
  <h1>{{ article.title }}</h1>
{% endunless %}
{% assign date = article.published_at | time_tag: format: 'date' %}
<p class="italic">{{ 'blog.article_metadata_html' | t: date: date, author: article.author }}</p>
<div class="rte">
  {{ article.content }}
</div>

{% if blog.comments_enabled? %}
  <h2>{{ 'blog.article_comments' | t }}</h2>

  <div id="shopify-comments">
    {% paginate article.comments by 10 %}
      {% for comment in article.comments %}
        <div>
          <p>{{ comment.author }}</p>
          <p>
            {{- comment.created_at | time_tag: format: 'date' -}}
          </p>
          <p>{{ comment.content }}</p>
        </div>
      {% endfor %}

      {{ paginate | default_pagination: anchor: 'comments' }}
    {% endpaginate %}
  </div>

  {% form 'new_comment', article %}
    <h2>{{ 'blog.comment_form_title' | t }}</h2>

    {{ form.errors | default_errors }}

    <div>
      <label for="author">{{ 'blog.comment_form_name' | t }}</label>
      <input type="text" name="comment[author]" id="author" value="{{ form.author }}" required>
    </div>

    <div>
      <label for="email">{{ 'blog.comment_form_email' | t }}</label>
      <input type="email" name="comment[email]" id="email" value="{{ form.email }}" required>
    </div>

    <div>
      <label for="body">{{ 'blog.comment_form_body' | t }}</label>
      <textarea name="comment[body]" id="body" required>{{ form.body }}</textarea>
    </div>

    <input type="submit" value="{{ 'blog.comment_form_submit' | t }}">
  {% endform %}
{% endif %}
</div>
{% schema %}
{
  "name": "t:general.article",
  "settings": []
}
{% endschema %}
